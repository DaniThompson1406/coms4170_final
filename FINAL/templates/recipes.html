<!DOCTYPE html>
<html>
    <head>
        <title>Unlocked Recipes</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
        <script src="{{ url_for('static', filename='data.js') }}"></script>
        <script src="{{ url_for('static', filename='script.js') }}"></script>
    </head>
    
<body onload="renderRecipes()">
    <h1>Recipes You've Discovered</h1>
    <div id="recipe-container" class="recipe-book"></div>

    <script>
        function renderRecipes() {
            const unlockedNames = JSON.parse(localStorage.getItem('unlockedRecipes')) || [];
            const container = document.getElementById('recipe-container');
    
            // Update the actual recipe objects based on stored unlocks
            unlockedNames.forEach(name => {
                const match = recipes.find(r => r.name === name);
                if (match) match.isUnlocked = true;
            });
    
            recipes.forEach(recipe => {
                if (recipe.hasRecipe && recipe.isUnlocked) {
                    const div = document.createElement('div');
                    div.className = 'recipe-card';
                    const dosageLine = recipe.dosage.join(', ');
                    const steps = recipe.recipe ? recipe.recipe.map(step => `<li>${step}</li>`).join('') : '';
                    div.innerHTML = `
                        <h2>${recipe.name}</h2>
                        <p><strong>Dosage:</strong> ${dosageLine}</p>
                        <ol>${steps}</ol>
                    `;
                    container.appendChild(div);
                }
            });
        }
    </script>
    
</body>
</html>
